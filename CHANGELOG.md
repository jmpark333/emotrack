# 변경 로그

## [v1.4.0] - 2025-09-14

### 수정됨
- **인증 시스템 완전 재설계**: 자동 로그인 문제 해결 및 페이지 새로고침 시 데이터 유지 기능 개선
- **서버 불안정성 해결**: 인증 상태 변경 리스너 최적화로 불필요한 데이터 로드 제거
- **세션 관리 개선**: 로그인 상태에서 페이지 새로고침 시 모든 데이터가 보존되도록 수정

#### 상세 변경사항
1. **인증 상태 변경 리스너 재설계**
   - onAuthStateChange 리스너 완전히 비활성화 (`index.html:2019-2020`)
   - SIGNED_IN 및 INITIAL_SESSION 이벤트로 인한 데이터 리셋 문제 해결
   - checkAuthState 함수만으로 인증 상태 처리하도록 단일화

2. **세션 관리 시스템 개선**
   - 세션이 있는 경우 데이터 자동 로드 기능 복원 (`index.html:2155-2171`)
   - 비로그인 상태에서는 UI만 초기화하고 데이터는 보존 (`index.html:2115-2121`)
   - 페이지 새로고침 시 체크리스트 상태, 레벨, 포인트가 유지되도록 수정

3. **에러 처리 강화**
   - 데이터 자동 로드 실패 시에도 세션은 유지되도록 개선
   - 서버 불안정성 메시지가 표시되지 않도록 최적화

4. **로그아웃 시스템 개선**
   - 로그아웃 시에만 데이터가 초기화되도록 명확화
   - UI 업데이트 함수를 직접 DOM 조작으로 변경하여 데이터 저장 호출 방지

### 문제 해결
1. **페이지 새로고침 시 데이터 리셋**: 세션이 있는 경우 데이터가 자동으로 로드되도록 수정
2. **체크리스트 상태 해제**: 인증 상태 변경 이벤트로 인한 불필요한 초기화 제거
3. **서버 불안정성 메시지**: 불필요한 데이터베이스 쿼리 호출 최소화
4. **자동 로그인 문제**: 사용자가 의도한 대로만 로그인이 작동하도록 개선

### 사용자 경험 개선
- ✅ 로그인 상태에서 페이지를 새로고침해도 모든 데이터가 유지됨
- ✅ 체크리스트 상태, 레벨, 포인트가 리셋되지 않음
- ✅ 서버 불안정성 메시지가 표시되지 않음
- ✅ 로그아웃 후 재로그인이 정상적으로 작동함

### 배포 정보
- **Netlify 배포 URL**: https://emotrack-app.netlify.app
- **커밋 해시**: 2a20b03

### 테스트 결과
이제 로그인 상태에서 페이지를 새로고침해도 체크리스트 상태, 레벨, 포인트가 완벽하게 유지되며 서버 불안정성 메시지가 더 이상 표시되지 않습니다.

---

## [v1.3.1] - 2025-09-13

### 추가됨
- **연속일수 클릭 기능**: 연속일수 카드 클릭 시 시작일 표시
- **시작일 표시 영역**: 연속일수 카드 하단에 시작일 정보 표시
- **클릭 인터랙션**: 카드 클릭으로 시작일 확인/숨김 토글

#### 상세 변경사항
1. **연속일수 카드 개선**
   - 클릭 이벤트 핸들러 추가 (`onclick="showStartDate()"`)
   - 시작일 표시 영역 추가 (`id="startDateDisplay"`)
   - 커서 포인터 및 툴팁 추가
   - `index.html:225-229`

2. **showStartDate() 함수 추가**
   - 시작일 포맷팅 (한국어 날짜 형식)
   - 클릭 시 시작일 표시/숨김 토글
   - 시작일이 없을 경우 "시작일 없음" 메시지
   - `index.html:438-461`

3. **CSS 인터랙션 개선**
   - stat-card에 hover 및 active 효과 추가
   - 부드러운 애니메이션 효과
   - 클릭 피드백 강화
   - `index.html:57-68`

### 사용 방법
1. **연속일수 카드 클릭**: 시작일 정보 표시
2. **다시 클릭**: 시작일 정보 숨김
3. **포맷**: "📅 2025년 9월 13일" 형식

### 사용자 경험 개선
- ✅ 직관적인 시작일 확인 가능
- ✅ 토글 방식으로 깔끔한 UI
- ✅ 시각적 피드백으로 상호작용 명확화
- ✅ 모바일에서도 쉬운 터치 인터랙션

### 배포 정보
- **Netlify 배포 URL**: https://emotrack-app.netlify.app

### 테스트 결과
연속일수 카드를 클릭하면 시작일이 깔끔하게 표시되고, 다시 클릭하면 숨겨집니다.

---

## [v1.3.0] - 2025-09-13

### 추가됨
- **자동 연속일수 계산 시스템**: 시작일 기반으로 연속일수 자동 계산
- **시작일 추적**: 첫 번째 전체 완료일을 시작일로 자동 설정
- **연속 사용 감지**: 날짜 변경 시 연속 사용 여부 자동 감지

#### 상세 변경사항
1. **새로운 데이터 필드 추가**
   - `startDate`: 연속 사용 시작일
   - `lastCompletedDate`: 마지막으로 모든 항목을 완료한 날짜
   - `index.html:317-318`

2. **calculateStreak() 함수 추가**
   - 시작일로부터 현재까지의 날짜 차이 자동 계산
   - 사용자 개입 없이 정확한 연속일수 제공
   - `index.html:437-452`

3. **updateStreak() 함수 완전 재설계**
   - 시작일 자동 설정 로직
   - 모든 항목 완료 시 마지막 완료일 업데이트
   - 자동 연속일수 계산
   - `index.html:455-474`

4. **checkDateChangeAndReset() 함수 개선**
   - 연속 사용 여부 자동 감지
   - 어제 모든 항목을 완료하지 않았으면 연속 초기화
   - 여러 날 건너뛰면 자동으로 연속 초기화
   - `index.html:621-667`

5. **수동 수정 기능 제거**
   - fixStreakIssue() 함수 삭제
   - 사용자 확인 없이 자동으로 연속일수 관리

### 새로운 동작 방식
1. **첫 전체 완료**: 시작일이 자동으로 설정되고 연속일수 = 1
2. **두번째 날**: 시작일로부터 2일차로 자동 계산
3. **연속 사용**: 매일 시작일로부터 날짜 수 자동 계산
4. **연속 끊김**: 하루 건너뛰면 자동으로 연속 초기화

### 사용자 경험 개선
- ❌ 수동 연속일수 수정 불필요
- ✅ 페이지 새로고침 시 항상 정확한 연속일수 표시
- ✅ 시작일 기반으로 자동 계산되어 오류 없음
- ✅ 연속 사용 여부 자동 감지

### 배포 정보
- **Netlify 배포 URL**: https://emotrack-app.netlify.app

### 테스트 결과
이제 연속일수가 시작일로부터 자동으로 계산되며, 사용자 개입 없이 항상 정확한 값을 표시합니다.

---

## [v1.2.3] - 2025-09-13

### 추가됨
- **임시 데이터 관리 기능**: 연속일수 수동 증가 및 오늘 데이터 리셋 기능
- **사용자 편의성 개선**: 연속일수 문제 해결을 위한 임시 조치

#### 상세 변경사항
1. **데이터 관리 UI 추가**
   - 연속일수 수동 증가 버튼 (`📈 연속일수 +1`)
   - 오늘 데이터 리셋 버튼 (`🔄 오늘 데이터 리셋`)
   - 임시 기능임을 명시하는 경고 메시지
   - `index.html:297-302`

2. **increaseStreak() 함수 추가**
   - 연속일수를 1 증가시키는 임시 기능
   - 확인 다이얼로그 포함
   - `index.html:613-621`

3. **resetTodayData() 함수 추가**
   - 오늘의 체크리스트 데이터만 리셋
   - 연속일수는 유지하고 lastCheck를 어제로 설정
   - `index.html:624-636`

### 사용 방법
1. **연속일수 증가**: `📈 연속일수 +1` 버튼 클릭
2. **데이터 리셋**: `🔄 오늘 데이터 리셋` 버튼으로 다시 체크 가능

### 주의사항
이 기능들은 임시 해결책이며, 추후 연속일수 로직이 개선되면 제거될 예정입니다.

### 배포 정보
- **Netlify 배포 URL**: https://emotrack-app.netlify.app

---

## [v1.2.2] - 2025-09-13

### 수정됨
- **연속 일수 로직 재수정**: 첫 번째 체크 시 연속 일수 증가하도록 복구
- **사용자 피드백 반영**: 체크리스트 완료 시 연속일수가 올바르게 증가하지 않는 문제 해결

#### 상세 변경사항
1. **연속 일수 로직 원복**
   - 첫 번째 체크리스트 항목을 완료할 때 연속 일수 증가
   - 어제도 체크한 경우: 연속 일수 +1
   - 첫 체크인 경우: 연속 일수 = 1
   - `index.html:434-461`

2. **보상 시스템 유지**
   - 모든 항목 완료 시 보상 및 뱃지 획득
   - 연속 일수는 첫 체크 시 증가, 보상은 전체 완료 시 획득

### 수정 이유
사용자 피드백: "오늘 완료하고 보상도 얻었는데 연속일수는 그대로야 원래 1일 이었으니까 오늘 완료하면 2일로 바뀌어야 되는거 아니야?"

### 배포 정보
- **Netlify 배포 URL**: https://emotrack-app.netlify.app

### 테스트 결과
이제 첫 번째 체크리스트 완료 시 연속 일수가 올바르게 증가하며, 모든 항목 완료 시 보상을 받을 수 있습니다.

---

## [v1.2.1] - 2025-09-13

### 수정됨
- **연속 일수 계산 로직 개선**: 모든 체크리스트 항목을 완료해야 연속 일수로 인정되도록 수정
- **GitHub 이슈 #2 해결**: 연속일수 동작여부 확인 필요 이슈 처리

#### 상세 변경사항
1. **updateStreak 함수 추가**
   - 연속 일수 계산 로직을 별도 함수로 분리하여 명확화
   - 모든 항목 완료 시에만 연속 일수 증가하도록 수정
   - 부분 완료 시에는 연속 일수 유지 (날짜 변경 시 초기화됨)
   - `index.html:434-461`

2. **updateProgress 함수 개선**
   - 연속 일수 업데이트 로직을 updateStreak() 함수로 위임
   - `index.html:470-471`

3. **연속 일수 로직 수정**
   - 이전: 첫 번째 체크 시 연속 일수 증가
   - 현재: 모든 항목 완료 시에만 연속 일수 증가
   - 어제도 모두 완료했을 경우에만 연속 일수 +1

### 배포 정보
- **Netlify 배포 URL**: https://emotrack-app.netlify.app
- **GitHub 이슈 #2**: 연속일수 동작여부 확인 필요 해결

### 테스트 결과
이제 모든 체크리스트 항목을 완료해야만 연속 일수가 증가하며, 부분 완료 시에는 연속 일수가 유지됩니다.

---

## [v1.2.0] - 2025-09-13

### 추가됨
- **레벨 진행도 표시 기능**: 평온 레벨 카드에 다음 레벨까지 필요한 포인트 표시
- **오늘 획득 포인트 표시**: 오늘의 보상 섹션에 현재 획득한 포인트 실시간 표시

#### 상세 변경사항
1. **updateLevelProgress 함수 추가**
   - 현재 레벨에서 다음 레벨까지 필요한 포인트 계산 및 표시
   - `index.html:419-425`

2. **updateDailyPoints 함수 추가**
   - 오늘 완료한 체크리스트 항목 수 × 10포인트 계산
   - 실시간으로 획득 포인트 업데이트
   - `index.html:428-431`

3. **UI 개선**
   - 평온 레벨 카드에 진행도 정보 표시 영역 추가 (`index.html:232`)
   - 오늘의 보상 섹션에 획득 포인트 표시 영역 추가 (`index.html:300-303`)

4. **레벨업 시스템 개선**
   - 체크박스 변경 시 레벨 진행도 실시간 업데이트
   - 레벨업 성공/실패 모두 진행도 정보 갱신

### 수정됨
- **파일 정리**: 중복된 emotrack.html 파일 삭제, index.html로 단일화

### 배포 정보
- **Netlify 배포 URL**: https://emotrack-app.netlify.app
- **배포 예정 ID**: [배포 후 업데이트]

### 테스트 결과
사용자가 언제 레벨업할 수 있는지 명확히 확인 가능하며, 오늘 획득한 포인트를 실시간으로 모니터링할 수 있습니다.

---

## [v1.1.0] - 2025-09-11

### 수정됨
- **체크 상태 유지 기능 개선**: 아침에 체크한 항목들이 점심에 페이지를 열었을 때 해제되는 문제 해결

#### 상세 변경사항
1. **checkDateChangeAndReset 함수 개선**
   - `lastCheck`가 없지만 `completedToday`에 데이터가 있는 경우, 오늘 날짜로 `lastCheck`를 설정하여 데이터를 유지하는 로직 추가

2. **handleCheck 함수 개선**
   - 체크 상태가 변경될 때마다 현재 날짜를 `lastCheck`에 저장하도록 수정
   - 하루 중에 페이지를 새로고침해도 체크 상태가 유지되도록 개선

3. **updateProgress 함수 개선**
   - 연속 일수 계산 로직을 개선하여 모든 항목이 체크되지 않아도 `lastCheck`가 오늘 날짜로 설정되도록 수정

### 배포 정보
- **Netlify 배포 URL**: https://emotrack-app.netlify.app
- **배포 ID**: 68c25032a811e71f75c97b90
- **커밋 해시**: 3c50a9842cebbb53c919c3756fc6be6df7f988db

### 테스트 결과
이제 아침에 체크한 항목들이 점심에 페이지를 열어도 해제되지 않고 유지됩니다.

---

## [v1.0.0] - 초기 릴리스
- 정서적 독립 트래커 기본 기능 구현
- 아침, 점심, 저녁 훈련 체크리스트
- 감정 일기 작성 기능
- 긴급 호흡법 기능
- 진행도 추적 및 보상 시스템